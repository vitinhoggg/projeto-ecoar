<!-- index.html -->
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Dashboard ECOAR ‚Äì Acad√™mico & Risco de Evas√£o</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <styles.css>
  </styles.css>
  <link rel="shortcut icon" href="icon/logo.png" type="image/x-icon">
  <style>
    body { padding: 20px; }
    .table-wrap { max-height: 60vh; overflow: auto; }
    .sticky-top { top: 20px; }
  </style>
</head>


<body>
  <div class="container-fluid">
    <h1 class="mb-3">üìä Dashboard ECOAR ‚Äì An√°lise Acad√™mica & Risco de Evas√£o</h1>
    <p class="text-muted">Painel com filtros, KPIs e visualiza√ß√µes. Dados via MongoDB (API Flask).</p>

    <div class="row">
      <div class="col-md-3">
        <div class="card sticky-top">
          <div class="card-body">
            <h5 class="card-title">üîç Filtros</h5>
            <div class="mb-3">
              <label class="form-label">Curso</label>
              <select id="curso" class="form-select"></select>
            </div>
            <div class="mb-3">
              <label class="form-label">Per√≠odo</label>
              <select id="periodo" class="form-select"></select>
            </div>
            <div class="mb-3">
              <label class="form-label">Risco</label>
              <select id="risco" class="form-select">
                <option>Todos</option>
                <option>Baixo</option>
                <option>M√©dio</option>
                <option>Alto</option>
              </select>
            </div>
            <div class="d-flex gap-2">
              <button class="btn btn-primary w-100" id="btn-aplicar">Aplicar</button>
              <button class="btn btn-secondary w-100" id="btn-reset">Reset</button>
            </div>
            <hr />
            <div class="d-flex gap-2">
              <select id="page-size" class="form-select">
                <option value="50">50</option>
                <option value="100" selected>100</option>
                <option value="150">150</option>
                <option value="200">200</option>
              </select>
              <div class="input-group">
                <span class="input-group-text">P√°gina</span>
                <input id="page" type="number" class="form-control" value="1" min="1" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-9">
        <div class="row mb-3">
          <div class="col-md-3">
            <div class="card"><div class="card-body">
              <div class="text-muted">üë®‚Äçüéì Total de Alunos</div>
              <div class="h4" id="kpi-total">0</div>
            </div></div>
          </div>
          <div class="col-md-3">
            <div class="card"><div class="card-body">
              <div class="text-muted">üìò M√©dia Geral</div>
              <div class="h4" id="kpi-media">0.00</div>
            </div></div>
          </div>
          <div class="col-md-3">
            <div class="card"><div class="card-body">
              <div class="text-muted">üö® % Alto Risco</div>
              <div class="h4" id="kpi-alto">0.0%</div>
            </div></div>
          </div>
          <div class="col-md-3">
            <div class="card"><div class="card-body">
              <div class="text-muted">üü° % Risco M√©dio</div>
              <div class="h4" id="kpi-medio">0.0%</div>
            </div></div>
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-md-6">
            <h5>Distribui√ß√£o da M√©dia Geral</h5>
            <canvas id="chart-media"></canvas>
          </div>
          <div class="col-md-6">
            <h5>Categoria de Risco</h5>
            <canvas id="chart-categoria"></canvas>
          </div>
        </div>

        <h4 class="mt-3">üìÑ Dados Filtrados</h4>
        <div class="table-wrap">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                <th>Matr√≠cula</th>
                <th>Nome</th>
                <th>Curso</th>
                <th>Per√≠odo</th>
                <th>Status</th>
                <th>M√©dia</th>
                <th>Risco ML</th>
                <th>Categoria</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>

        <div class="d-flex justify-content-between align-items-center mt-2">
          <div id="pagination-info" class="text-muted"></div>
          <div class="btn-group">
            <button class="btn btn-outline-secondary" id="prev">Anterior</button>
            <button class="btn btn-outline-secondary" id="next">Pr√≥xima</button>
          </div>
        </div>

        <h4 class="mt-4">üö® Alunos em Alto Risco</h4>
        <div class="table-wrap">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                <th>Matr√≠cula</th>
                <th>Nome</th>
                <th>Curso</th>
                <th>Per√≠odo</th>
                <th>M√©dia</th>
                <th>Risco ML</th>
              </tr>
            </thead>
            <tbody id="tbody-alto"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

<script src="js/java.js"></script>
</body>
</html>